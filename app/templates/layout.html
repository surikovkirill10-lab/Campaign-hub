<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Campaign Hub{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {# 1. Bulma с CDN по HTTPS #}
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

  {# 2. Твой кастомный CSS (лежит в app/static/css/app.css) #}
  <link rel="stylesheet"
        href="{{ url_for('static', path='css/app.css') }}">

  {# Дополнительные стили (если когда-нибудь понадобятся) #}
  {% block extra_head %}{% endblock %}

  <script>
    // Синхронизируем высоту шапки с CSS-переменной --topbar-h
    (function () {
      function setH() {
        var bar = document.querySelector('.topbar');
        if (!bar) return;
        var h = Math.ceil(bar.getBoundingClientRect().height);
        document.documentElement.style.setProperty('--topbar-h', h + 'px');
      }
      window.addEventListener('load', setH);
      window.addEventListener('resize', setH);
    })();
  </script>
  <script src="https://unpkg.com/htmx.org@1.9.12" defer></script>
</head>
<body>

{# На страницах логина шапку не показываем #}
{% if not request.url.path.startswith('/auth') %}
<div class="topbar">
  <div class="wrap container">
    <a class="brand" href="/campaigns">
      <img src="{{ url_for('static', path='img/logo.svg') }}" alt="Logo">
      <span>Campaign&nbsp;Hub</span>
    </a>

    <nav class="topnav">
      <a href="/bookings"
         class="{% if request.url.path.startswith('/bookings') %}active{% endif %}">
        Bookings
      </a>
      <a href="/campaigns"
         class="{% if request.url.path.startswith('/campaigns') %}active{% endif %}">
        Campaigns
      </a>
      <a href="/directory"
         class="{% if request.url.path.startswith('/directory') %}active{% endif %}">
        Directory
      </a>
      <a href="/admin/users"
         class="{% if request.url.path.startswith('/admin') %}active{% endif %}">
        Admin
      </a>
      {% if request.session.get('user_id') %}
      <a href="/auth/logout">
        Logout
      </a>
      {% endif %}
    </nav>
  </div>
</div>
{% endif %}

<main class="page-shell">
  {% block content %}{% endblock %}
</main>

<script src="{{ url_for('static', path='js/postclick.js') }}"></script>
</body>
</html>
